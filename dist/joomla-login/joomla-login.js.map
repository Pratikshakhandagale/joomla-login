{"version":3,"file":"joomla-login.js","sourceRoot":"","sources":["../../src/app/joomla-login/joomla-login.ts"],"names":[],"mappings":"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","sourcesContent":["import { LoggerService } from './../logger.service';\nimport { Component } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ToastController, Events } from 'ionic-angular';\n\nconst HTML_TEMPLATE = `\n<ion-content class=\"back-image\">\n<ion-item no-lines [hidden]=\"!isCustom\" float-end>\n  <button item-right class=\"btn-demo\" type=\"submit\" (click)=\"demoLogin()\" ion-button text-capitalize outline color=\"color-white\">Demo</button>\n</ion-item>\n<div class=\"es-title\">\n  <img class=\"img-logo\" src=\"assets/icon/icon.png\" />\n  <ion-title color=\"color-white\">Welcome to {{appName}}</ion-title>\n</div>\n<ion-list no-lines>\n    <ion-item [hidden]=\"!isCustom\">\n      <ion-input placeholder=\"Site URL\" [(ngModel)]=\"siteurl\" type=\"url\" required></ion-input>\n    </ion-item>\n\n    <ion-item>\n      <ion-input outline placeholder=\"Username\" [(ngModel)]=\"username\" type=\"text\" required></ion-input>\n    </ion-item>\n\n    <ion-item>\n      <ion-input #input placeholder=\"Password\" [(ngModel)]=\"password\" type=\"{{hidePassword}}\" required></ion-input>\n      <button (click)=\"showPassword()\" type=\"button\" ion-button item-right large clear>\n            <ion-icon color=\"color-white\" name=\"{{passwordIcon}}\"></ion-icon>\t\t\t\t\t\t\n      </button>\n   </ion-item>\n\n    <ion-row padding>\n      <button text-capitalize type=\"submit\" (click)=\"doLogin()\" ion-button block color=\"clr-button\">Login</button>\n    </ion-row>\n</ion-list>\n</ion-content>\n`;\n\nconst CSS_STYLE = `\n.item-ios.item-label-stacked .text-input, .item-ios.item-label-floating .text-input, .item-md.item-label-stacked .text-input, .item-md.item-label-floating .text-input {\n  margin-top: 26px;\n  margin-bottom: 7px;\n  font-weight: 600 !important;\n}\n.es-title {\n  margin-top: 20% !important;\n  margin-bottom: 5%;\n}\n.img-logo {\n  height: 15vw;\n  width: 15vw;\n  margin-bottom: 8px;\n}\nimg {\n  display: block;\n  margin: 0 auto;\n  width:70%;\n}\n.toolbar-title-md, .toolbar-title-ios {\n  text-align: center!important;\t\n  font-size: 2.0rem; \n}\nion-input {\n  border-bottom: 0.5px solid map-get($colors, primary);\n}\n.button-large-md, .button-large-ios {\n  height: 1.8em !important;\t\n}\n.scroll-content{\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n  display: block;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  -webkit-overflow-scrolling: touch;\n  will-change: scroll-position;\n  contain: size style layout;\n  padding-bottom: 0 !important;\n}\n`;\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  template: HTML_TEMPLATE,\n  styles: [CSS_STYLE]\n})\nexport class JoomlaLoginPage {\n  apiBase: any;\n  isCustom: boolean = true;\n  public customData: any;\n  datatobesend: any;\n  username: string = '';\n  password: string = '';\n  siteurl: string = '';\n  loginUrl:string = \"/index.php?option=com_api&app=users&resource=login&format=raw\";\n  appName: string ='EasySocial';\n  passwordIcon: string = 'eye-off';\n\thidePassword: string = 'password';\n  constructor(\n    public toastCtrl: ToastController,\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public LoggerService: LoggerService,\n    public events: Events\n  ) {\n\n    this.LoggerService.getConfigs().then(\n      (data: any) => {\n        if (data['custom_app']['LOGINURL'].length > 0) {\n          this.isCustom = false;\n          this.apiBase = data['custom_app']['LOGINURL'];\n        }\n        this.appName = data['custom_app']['APPNAME'];\n        this.loginUrl = data['custom_app']['LOGIN_API'];\n      }\n    )\n  }\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LoginPage');\n  }\n\n  demoLogin() {\n    this.username = 'Ruby';\n    this.password = \"abcd1234\";\n    this.siteurl = 'http://app.cloudaccess.host';\n  }\n\n  showPassword() {\n\t\tthis.hidePassword = this.hidePassword === 'password' ? 'text' : 'password';\n\t\tthis.passwordIcon = this.passwordIcon === 'eye' ? 'eye-off' : 'eye';\t\t\n\t}\n   doLogin() {\n    if (!this.siteurl) {\n      this.presentToast(\"Site url can't be blank\");\n    } else if (this.siteurl != '' && !this.siteurl.match(/^(https?:\\/\\/)/)) {\n      this.presentToast('Please enter valid URL');\n    } else if (!this.username) {\n      this.presentToast(\"Username can't be blank\");\n    } else if (!this.password) {\n      this.presentToast(\"Password can't be blank\");\n    } else {\n      this.Login();\n    }\n  }\n\n  async Login() {\n    this.siteurl = (this.isCustom) ? this.siteurl : this.apiBase;\n    //this.navCtrl.setRoot(HomePage);\n\n    let url = this.siteurl + this.loginUrl; \n    let datatobesend = 'username=' + this.username + '&password=' + encodeURIComponent(this.password);\n\n    this.LoggerService.getConfigs().then(data => {\n      console.log(' data ', data);\n    });\n    await this.LoggerService.postCall(url, datatobesend).then(\n      (data: any) => {\n        if (!data['err_code']) {\n          this.events.publish('user:loggin', data);\n        }\n        else {\n          this.presentToast(data['err_msg']);\n        }\n      }, err => {\n        console.log('err ', err);\n      });\n  }\n\n  presentToast(message: string) {\n    const toast = this.toastCtrl.create({\n      message: message,\n      duration: 3000\n    });\n    toast.present();\n  }\n}\n"]}